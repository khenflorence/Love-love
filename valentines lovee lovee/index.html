<script>
        // --- LOGIC FOR THE "NO" BUTTON ---
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const introScreen = document.getElementById('introScreen');
        const msgBtn = document.getElementById('openMsgBtn');
        const audio = document.getElementById('bgMusic');

        let yesScale = 1; 

        function moveButton() {
            const maxWidth = window.innerWidth - noBtn.offsetWidth - 20;
            const maxHeight = window.innerHeight - noBtn.offsetHeight - 20;
            const randomX = Math.random() * maxWidth;
            const randomY = Math.random() * maxHeight;
            
            noBtn.style.position = 'absolute';
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
            
            yesScale += 0.1;
            yesBtn.style.transform = `scale(${yesScale})`;
        }

        noBtn.addEventListener('mouseover', moveButton);
        noBtn.addEventListener('touchstart', moveButton); 

        noBtn.addEventListener('click', () => {
            noBtn.style.display = 'none'; 
            yesScale += 0.5; 
            yesBtn.style.transform = `scale(${yesScale})`;
        });

        // --- LOGIC FOR THE "YES" BUTTON ---
        yesBtn.addEventListener('click', () => {
            // Play music immediately when she says YES!
            audio.play().catch(error => console.log("Music play failed:", error));
            
            introScreen.style.opacity = '0';
            setTimeout(() => {
                introScreen.style.display = 'none';
                msgBtn.style.display = 'flex'; 
            }, 800);
        });

        // --- ENVELOPE LOGIC ---
        const container = document.getElementById('envelopeContainer');
        const modal = document.getElementById('messageModal');
        const closeBtn = document.getElementById('closeMsgBtn');

        msgBtn.onclick = function() { modal.style.display = "flex"; }
        closeBtn.onclick = function() { modal.style.display = "none"; }
        window.onclick = function(event) {
            if (event.target == modal) { modal.style.display = "none"; }
        }

        container.addEventListener('click', () => {
            const isOpen = container.classList.contains('open');
            container.classList.toggle('open');
            
            if(!isOpen) {
                // If OPENING: Play music
                audio.play();
                for(let i = 0; i < 25; i++) {
                    setTimeout(createHeart, i * 80);
                }
            } else {
                // If CLOSING: Stop music and reset to 0
                audio.pause();
                audio.currentTime = 0;
            }
        });

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('floating-heart');
            heart.innerHTML = '❤️';
            const randomX = Math.random() * 200 + 50; 
            heart.style.left = randomX + 'px';
            heart.style.top = '100px';
            const size = Math.random() * 20 + 10;
            heart.style.fontSize = size + 'px';
            container.appendChild(heart);
            setTimeout(() => { heart.remove(); }, 2500);
        }
    </script>
</body>
</html>
